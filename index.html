<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>El Secreto del Zoco de las Estrellas</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      background: radial-gradient(circle at top, #143a52 0%, #120c16 50%, #050308 100%);
      color: #fdf7e7;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    .game-container {
      width: 100%;
      max-width: 480px;
      padding: 16px;
    }

    .card {
      background: rgba(14, 9, 20, 0.92);
      border-radius: 18px;
      padding: 20px;
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.5);
      border: 1px solid rgba(255, 215, 0, 0.25);
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: "";
      position: absolute;
      inset: -50%;
      background-image: radial-gradient(circle at top, rgba(255, 215, 0, 0.12), transparent 60%);
      opacity: 0.9;
      pointer-events: none;
    }

    h1, h2 {
      margin-bottom: 12px;
      text-align: center;
    }

    p {
      margin-bottom: 10px;
      line-height: 1.4;
    }

    .btn {
      display: inline-block;
      margin-top: 12px;
      padding: 10px 18px;
      border-radius: 999px;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      background: linear-gradient(135deg, #ffce54, #f6a623);
      color: #3a1800;
      font-weight: 600;
      width: 100%;
      text-align: center;
      box-shadow: 0 6px 16px rgba(0,0,0,0.45);
    }

    .screen { display: none; }
    .screen.active { display: block; }

    .zellige-line {
      height: 8px;
      width: 100%;
      margin: 10px 0 16px;
      background-image:
        linear-gradient(45deg, #006d77 25%, transparent 25%),
        linear-gradient(-45deg, #e29578 25%, transparent 25%),
        linear-gradient(45deg, transparent 75%, #ffddd2 75%),
        linear-gradient(-45deg, transparent 75%, #83c5be 75%);
      background-size: 14px 14px;
    }

    .box-locked {
      margin: 16px auto;
      width: 140px;
      height: 80px;
      border-radius: 8px;
      background: linear-gradient(135deg, #b08d57, #f0c878);
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.5);
    }

    .locks {
      display: flex;
      justify-content: center;
      gap: 8px;
    }

    .lock {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      border: 2px solid #3b2203;
      background: rgba(255,255,255,0.1);
    }

    .lock.open {
      background: #8bc34a;
      box-shadow: 0 0 8px rgba(139,195,74,0.8);
    }

    .objects-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
    }

    .object-card {
      padding: 12px;
      border-radius: 12px;
      background: rgba(34,23,43,0.85);
      cursor: pointer;
      border: 1px solid rgba(255,215,0,0.2);
      text-align: center;
    }

    .color-box {
      flex: 1;
      height: 60px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: white;
      font-weight: bold;
    }

    .color-azul { background: #1e88e5; }
    .color-ocre { background: #ffb74d; }
    .color-verde { background: #26a69a; }

    .desert-area {
      height: 180px;
      border-radius: 18px;
      background: linear-gradient(to top, #c96f28 0%, #f4a261 40%, #26163b 40%);
      position: relative;
      overflow: hidden;
    }

    .light {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: radial-gradient(circle, #ffe082 0%, #ffc107 40%, transparent);
      position: absolute;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .camel-container {
      margin-top: 20px;
      height: 80px;
      overflow: hidden;
      position: relative;
    }

    .camel {
      position: absolute;
      left: -80px;
      bottom: 0;
      font-size: 3rem;
      animation: camel-walk 7s linear forwards;
    }

    @keyframes camel-walk {
      0% { transform: translateX(0); }
      100% { transform: translateX(120vw); }
    }
  </style>
</head>

<body>
  <div class="game-container">
    <div class="card">

      <!-- PANTALLA 1 -->
      <div id="screen-intro" class="screen active">
        <h1>El Secreto del Zoco de las Estrellas</h1>
        <div class="zellige-line"></div>
        <p>En la noche de tu cumplea√±os recibes un mensaje misterioso:</p>
        <p style="font-style: italic; text-align:center;">‚ÄúUn regalo espera a quien siga la luz del desierto.‚Äù</p>
        <button class="btn" onclick="goTo('screen-story')">Comenzar</button>
      </div>

      <!-- PANTALLA 2 -->
      <div id="screen-story" class="screen">
        <h2>El Mercader de las Estrellas</h2>
        <div class="zellige-line"></div>
        <p>Apareces en un zoco de Marruecos. Un mercader te entrega una caja con tres cerraduras.</p>

        <div class="box-locked"></div>
        <div class="locks">
          <div id="lock1" class="lock"></div>
          <div id="lock2" class="lock"></div>
          <div id="lock3" class="lock"></div>
        </div>

        <button class="btn" onclick="goTo('screen-test1')">Primera prueba</button>
      </div>

      <!-- PANTALLA 3 -->
      <div id="screen-test1" class="screen">
        <h2>Prueba 1</h2>
        <div class="objects-grid">
          <div class="object-card" onclick="test1()">üçµ Tetera</div>
          <div class="object-card" onclick="test1()">üïå Minarete</div>
          <div class="object-card" onclick="test1()">üõ†Ô∏è Artesano</div>
          <div class="object-card" onclick="test1()">üê™ Camello</div>
        </div>
        <p id="msg1"></p>
      </div>

      <!-- PANTALLA 4 -->
      <div id="screen-test2" class="screen">
        <h2>Prueba 2</h2>
        <div class="colors-row" style="display:flex; gap:10px;">
          <div class="color-box color-azul" data-color="azul" onclick="colorClick(this)">Azul</div>
          <div class="color-box color-ocre" data-color="ocre" onclick="colorClick(this)">Ocre</div>
          <div class="color-box color-verde" data-color="verde" onclick="colorClick(this)">Verde</div>
        </div>
        <p id="msg2"></p>
      </div>

      <!-- PANTALLA 5 -->
      <div id="screen-test3" class="screen">
        <h2>Prueba 3</h2>
        <div id="desert-area" class="desert-area">
          <div id="light" class="light" onclick="lightClick()">‚òÖ</div>
        </div>
        <p id="msg3"></p>
      </div>

      <!-- FINAL -->
      <div id="screen-final" class="screen">
        <h2>La Caja se Abre</h2>
        <p>üéâ Tu regalo es un viaje a Marruecos üéâ</p>

        <div class="camel-container">
          <div class="camel">üê™</div>
        </div>

        <button class="btn" onclick="restart()">Ver otra vez</button>
      </div>

    </div>
  </div>

  <script>
    function goTo(id) {
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    // PRUEBA 1
    function test1() {
      document.getElementById("lock1").classList.add("open");
      document.getElementById("msg1").textContent = "¬°Bien hecho!";
      setTimeout(()=>goTo("screen-test2"),1000);
    }

    // PRUEBA 2
    let colors = new Set();
    function colorClick(el){
      colors.add(el.dataset.color);
      el.style.opacity = ".7";
      document.getElementById("msg2").textContent = "Sigue...";
      if(colors.size===3){
        document.getElementById("lock2").classList.add("open");
        setTimeout(()=>goTo("screen-test3"),1000);
      }
    }

    // PRUEBA 3
    let lightCount=0;
    function lightClick(){
      lightCount++;
      const area=document.getElementById("desert-area");
      const light=document.getElementById("light");
      const msg=document.getElementById("msg3");

      if(lightCount<3){
        msg.textContent="Sigue la luz...";
        const r=area.getBoundingClientRect();
        light.style.left=(Math.random()*(r.width-30))+"px";
        light.style.top=(Math.random()*(r.height-30))+"px";
      } else {
        document.getElementById("lock3").classList.add("open");
        msg.textContent="La caja est√° lista.";
        setTimeout(()=>goTo("screen-final"),1200);
      }
    }

    // REINICIAR
    function restart(){
      colors.clear();
      lightCount=0;
      document.querySelectorAll(".color-box").forEach(c=>c.style.opacity="1");
      document.querySelectorAll(".lock").forEach(l=>l.classList.remove("open"));
      goTo("screen-intro");
    }
  </script>
</body>
</html>
